var d="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},e="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function h(){h=function(){};e.Symbol||(e.Symbol=k)}var k=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function l(){h();var a=e.Symbol.iterator;a||(a=e.Symbol.iterator=e.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&d(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return n(this)}});l=function(){}}function n(a){var b=0;return p(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function p(a){l();a={next:a};a[e.Symbol.iterator]=function(){return this};return a}function q(a){l();var b=a[Symbol.iterator];return b?b.call(a):n(a)}var r=r||function(){},t=[];
function u(a,b){this.filename=a;this.a=[];this.f=null;this.s=!!b;this.b=null;a=new Date;this.l=Math.round(a.getSeconds()/2)|a.getMinutes()<<5|a.getHours()<<11;this.i=a.getFullYear()-1980<<9|a.getMonth()+1<<5|a.getDate()}u.prototype.m=function(a,b){b=(new TextEncoder("utf-8")).encode(b);this.g(a,b);return this};u.prototype.g=function(a,b){if(!(b instanceof Uint8Array))throw"invalid parameter";this.a.push({name:a.replace("\\","/"),data:b});return this};
u.prototype.j=function(){var a;r("NullZip archive generation started");var b={},c=q(this.a);for(a=c.next();!a.done;a=c.next())a=a.value,a.size=a.data?a.data.byteLength:0,a.c=a.data?this.c(a.data):0,b[a.name]=a;c=[];if(this.s){var f=/\//gi,g=q(this.a);for(a=g.next();!a.done;a=g.next()){a=a.value;for(var m=a.name;a=f.exec(m);)a={name:m.substr(0,a.index+1),size:0,c:0,data:new Uint8Array(0)},"undefined"===typeof b[a.name]&&(b[a.name]=a,c.push(a))}}Array.prototype.push.apply(this.a,c);this.a.sort(function(a,
b){return a.name.length-b.name.length||a.name.localeCompare(b.name)});b=this.a.reduce(function(a,b){return a+76+2*b.name.length+b.size},22);r("Estimated file size: "+b);this.b=new ArrayBuffer(b);c=new v(this.b);f=w("504b0304140000000000");g=q(this.a);for(a=g.next();!a.done;a=g.next())a=a.value,a.u=c.a,x(c,f),y(c,this.l),y(c,this.i),z(c,a.c),z(c,a.size),z(c,a.size),y(c,a.name.length),y(c,0),A(c,a.name),0<a.size&&x(c,a.data);f=c.a;g=w("504b01023f00140000000000");m=q(this.a);for(a=m.next();!a.done;a=
m.next())a=a.value,x(c,g),y(c,this.l),y(c,this.i),z(c,a.c),z(c,a.size),z(c,a.size),y(c,a.name.length),y(c,0),y(c,0),y(c,0),y(c,0),z(c,a.size?32:48),z(c,a.u),A(c,a.name);a=c.a-f;x(c,w("504b050600000000"));y(c,this.a.length);y(c,this.a.length);z(c,a);z(c,f);y(c,0);r("Finished creating zip. size="+c.a+", predicted size="+b);return this.b};u.prototype.h=function(){this.b||this.j();var a=new Blob([this.b],{type:"application/zip"});this.f&&window.URL.revokeObjectURL(this.f);return this.f=URL.createObjectURL(a)};
u.prototype.o=function(a){var b=a instanceof HTMLAnchorElement?a:document.createElement("a");"string"===typeof a&&(b.innerHTML=a);b.href=this.h();b.download=this.filename;b.hasChildNodes||(b.innerText=this.filename);r("Link created for file "+this.filename);return b};u.prototype.c=function(a){var b,c,f=-1;if(!t)for(t=[],c=0;256>c;b=++c){for(var g=0;8>g;g++)b=b&1?3988292384^b>>>1:b>>>1;t[c]=b}for(b=0;b<a.byteLength;b++)f=f>>>8^t[(f^a[b])&255];return(f^-1)>>>0};
function w(a){for(var b=new Uint8Array(Math.ceil(a.length/2)),c=0;c<b.length;c++)b[c]=parseInt(a.substr(2*c,2),16);return b}function v(a){this.b=new DataView(a);this.a=0;new TextEncoder("utf-8")}function y(a,b){a.b.setUint16(a.a,b,!0);a.a+=2}function z(a,b){a.b.setUint32(a.a,b,!0);a.a+=4}function x(a,b){if(!(b instanceof Uint8Array))throw"invalid parameter";(new Uint8Array(a.b.buffer)).set(b,a.a);a.a+=b.byteLength}
function A(a,b){for(var c=0;c<b.length;c++)a.b.setUint8(a.a++,b.charCodeAt(c)&255)};window.NullZipArchive=u;u.prototype.createDownloadLink=u.prototype.o;u.prototype.addFileFromString=u.prototype.m;u.prototype.addFileFromUint8Array=u.prototype.g;u.prototype.generate=u.prototype.j;u.prototype.createDownloadUrl=u.prototype.h;
